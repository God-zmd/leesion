<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>学生管理</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="../../css/layui.css"  media="all">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="../../js/jquery-3.4.1.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script type="text/javascript" src="../../layui.js"></script>

  <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
  <style type="text/css">
    li{
    	float: left;
    	width: 100px;
    	line-height: 50px;
    }

  </style>
</head>
<body>

<div class="layui-tab">
  <ul class="layui-tab-title">
    <li class="layui-this">学生信息管理</li>
   
  </ul>
  <div class="layui-tab-content">
    <div class="layui-tab-item layui-show">
                <div class="site-demo-button" id="layerDemo" style="margin-bottom: 0">
                    <form class="layui-form" action="" lay-filter="search_example">
                        <div class="layui-form-item">
                            <!--<label class="layui-form-label">学生专业</label>-->
                                <div class="layui-inline">
                                    <label class="layui-form-label">学号</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="stuNumesearch" id="stuNumesearch" autocomplete="off" class="layui-input" >
                                    </div>
                                </div>

                            <div class="layui-inline">
                                <label class="layui-form-label">起始日期</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="stuBithsearch" id="stuBithsearch1" placeholder="点击输入日期" autocomplete="off" class="layui-input" >
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">结束日期</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="stuBithsearch" id="stuBithsearch2" placeholder="点击输入日期" autocomplete="off" class="layui-input" >
                                </div>
                            </div>

                            <div class="layui-inline">
                            <label class="layui-form-label">姓名</label>
                            <div class="layui-input-inline">
                                <input type="text" name="stuName" id="stuNamesearch" autocomplete="off" class="layui-input" >
                            </div>
                        </div>


                            <button class="layui-btn" style="height:40px;width:80px">搜索</button>
                        </div>
                        <!--<input type="text" name="search" id="search" style="height:40px;margin-left:50px;margin-top:20px">-->

                    </form>

                    <!--<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>-->
                    <button data-method="notice" class="layui-btn" style="left:200px">添加</button>

                </div>






            </div>


        </div>


      <div class="layui-form">
         <!--表格-->
         <table class="layui-hide" id="test" lay-filter="test"></table>
 
          <script type="text/html" id="barDemo">
             <a lay-event="edit" style="color: blue">修改</a>
             <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
          </script>
          <script type="text/html" id="barDemo2">
              <a lay-event="enter" style="color: blue">录入</a>
          </script>
          <script type="text/html" id="barDemo3">
              <a lay-event="selectSubject" style="color: blue">选课</a>
          </script>

      </div>



    </div>

  </div>
</div>


<!--隐藏的修改页面-->
<div class="editManage" style="display: none">

    <form class="layui-form" action="" lay-filter="example">
      <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="display: none">学生ID</label>
            <div class="layui-input-inline">
                <input type="text" name="stuId" id="stuIdedit" autocomplete="off" class="layui-input" style="display: none" >
            </div>
        </div>
    </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">学生姓名</label>
                <div class="layui-input-inline">
                    <input type="text" name="stuName" id="stuNameedit" autocomplete="off" class="layui-input" >
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">学号</label>
                <div class="layui-input-inline">
                    <input type="text" name="stuNum" id="stuNumedit" autocomplete="off" class="layui-input" >
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label" >学生性别</label>
                <div class="layui-input-inline">
                    <input type="text" name="stuSex" id="stuSexedit" autocomplete="off" class="layui-input" >
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label" style="display: none">出生日期</label>
                <div class="layui-input-inline">
                    <input type="text" name="stuBirth" id="stuBirthedit" autocomplete="off" class="layui-input" style="display: none">
                </div>
            </div>

        </div>

        <!--<div class="layui-form-item">-->
            <!--<label class="layui-form-label">班级</label>-->
            <!--<div class="layui-input-inline">-->
                <!--<select name="gradeName" id="gradeNameedit">-->
                    <!--<option value=""></option>-->
                <!--</select>-->
            <!--</div>-->
        <!--</div>-->
        <!--<div style="margin-left: 20px">信息管理</div>-->


        <div class="layui-form-item">
            <div class="layui-input-block">
                <button type="submit" class="layui-btn" lay-submit lay-filter="edit_demo">立即提交</button>
                <!--<button type="reset" class="layui-btn layui-btn-primary">重置</button>-->
            </div>
        </div>
    </form>
</div>

<!-- 隐藏的添加页面         -->
<div class="showAdd" style="display:none;position:relative;margin-top: 10px">

    <form class="layui-form" action="" lay-filter="add_example">
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">学生姓名</label>
                <div class="layui-input-inline">
                    <input type="text" name="stuName" id="stuNameadd" placeholder="请输入姓名" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">学号</label>
                <div class="layui-input-inline">
                    <input type="text" name="stuNum" id="stuNumadd" placeholder="请输入学号" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">出生日期</label>
                <div class="layui-input-inline">
                    <input type="text" name="stuBirth" id="stuBirthadd" placeholder="点击输入日期" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">学生性别</label>
            <div class="layui-input-inline">
                <select name="stuSex" id="stuSexadd">
                    <option value="">请选择性别</option>
                    <option value="男">男</option>
                    <option value="女">女</option>
                </select>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">班级</label>
            <div class="layui-input-inline">
                <select name="gradeName" id="gradeNameadd">
                    <option value="">请选择班级</option>
                </select>
            </div>
        </div>




        <div class="layui-form-item">
            <div class="layui-input-block">
                <button type="submit" class="layui-btn" lay-submit="" lay-filter="add_demo">确认添加</button>
                <!--<button type="reset" class="layui-btn layui-btn-primary">重置</button>-->
            </div>
        </div>
    </form>
</div>


<script>
    $( function() {
        $( "#stuBirthadd" ).datepicker();

        $( "#stuBirthadd" ).datepicker( "option", "dateFormat","yy-mm-dd" );
        $( "#stuBithsearch1" ).datepicker();

        $( "#stuBithsearch1" ).datepicker( "option", "dateFormat","yy-mm-dd" );

        $( "#stuBithsearch2" ).datepicker();

        $( "#stuBithsearch2" ).datepicker( "option", "dateFormat","yy-mm-dd" );


    } );

    // $("#stuBirthadd").datetimepicker({
    //     format: "yyyy-mm-dd hh:ii:ss",
    //     weekStart: 1,
    //     todayBtn: 1,
    //     autoclose: true,
    //     todayHighlight: 1,
    //     forceParse: 1,
    // // });
    // $(function() {
    //     $( "#stuBirthadd" ).datepicker({
    //         format: 'yyyy-mm-dd',
    //             // pickTime: true
    //     });
    //
    // });
    // var dateFormat = $( ".selector" ).datepicker( "option", "dateFormat" );
    //
    // // Setter
    // $( ".selector" ).datepicker( "option", "dateFormat", "yy-mm-dd" );

    //
    // $(function() {
    //     $( "#stuBirthedit" ).datepicker({
    //         format: 'yyyy-mm-dd',
    //         // pickTime: true
    //     });
    //
    // });
    //
    // $(function() {
    //     $("#stuBithsearch1").datepicker({
    //         dateFormat: 'yyyy-mm-dd'
    //         // pickTime: true
    //     });
    // })
    // $('.date').datepicker({dateFormat: "yy-mm-dd"});
    // $(function() {
    //     $( "#stuBithsearch2" ).datepicker({
    //         format: 'yyyy-mm-dd',
    //         // pickTime: true
    //     });
    //
    // });

//表格

layui.use(['table','form'], function(){
  var table = layui.table,
               form=layui.form;

    var strings=new Array();
    strings.push($("#stuNumesearch").val())
    strings.push($("#stuBithsearch1").val())
    strings.push($("#stuBithsearch2").val())
    strings.push($("#stuNamesearch").val())
    table.render({
    elem: '#test'
    ,url:"/student/searchQeury?searchNames="+strings
    // ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
      ,type:'get'
    // ,defaultToolbar: ['filter', 'exports', 'print', { //自定义头部工具栏右侧图标。如无需自定义，去除该参数即可
    //   title: '提示'
    //   ,layEvent: 'LAYTABLE_TIPS'
    //   ,icon: 'layui-icon-tips'
    //   ,skin: 'demo-class'
    // }]
    ,title: '用户数据表'
    ,parseData:function (res) {
        console.log(res);
        return {
            "code": res.code
            , "msg": res.msg
            , "count": res.count
            , "data": res.data
        }
      }
        ,cols: [[
            {type: 'checkbox', fixed: 'left'}
            ,{field:'stuId', title:'编号', width:70, fixed: 'left', unresize: true,sort: true}
            ,{field:'stuName', title:'姓名', width:60}
            ,{field:'stuNum', title:'学号', width:110}
            ,{field:'stuSex', title:'性别', width:70}
            ,{field:'stuBirth', title:'出生日期', width:120}
            ,{field:'gradeName', title:'所在班级', width:120, sort: true,templet: '<div>{{d.grade.gradeName}}</div>'}
            ,{field:'subjectNum', title:'选修科目数', width:120,sort: true}
            ,{field:'avgScores', title:'平均分', width:90,sort: true}
            ,{field:'right', title:'分数录入',toolbar: '#barDemo2', width:95}
            ,{field:'right', title:'选课',toolbar: '#barDemo3', width:90}
            ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:110}
        ]]
    ,page: true
      ,limits:[1,5,10,20]
  });

    //监听行单击事件，给修改页面先赋值
    table.on('row(test)', function(obj){
        console.log(obj.data)
        form.val("example",obj.data)
    });


    //监听行工具事件
    table.on('tool(test)', function(obj){ //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
        var data = obj.data //获得当前行数据
            ,layEvent = obj.event; //获得 lay-event 对应的值
        if(layEvent === 'detail'){
            layer.msg('查看操作');
        } else if(layEvent === 'del'){
            layer.confirm('真的删除行么', function(index){
                // obj.del(); //删除对应行（tr）的DOM结构
                // layer.close(index);
                //向服务端发送删除指令
                $.ajax({
                    url:'/student/deleteStudent'
                    ,type:'get'
                    ,dataType:'json'
                    ,data:{
                        "stuId":data.stuId
                    }
                    , success:function (res) {
                        if (res.status=="success") {
                            layer.msg("删除成功")
                            var strings=new Array();
                            strings.push($("#stuNumesearch").val())
                            strings.push($("#stuBithsearch1").val())
                            strings.push($("#stuBithsearch2").val())
                            strings.push($("#stuNamesearch").val())
                            var tableIns =table.render({
                                elem: '#test'
                                ,url:"/student/searchQeury?searchNames="+strings
                                // ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
                                ,type:'get'
                                // ,defaultToolbar: ['filter', 'exports', 'print', { //自定义头部工具栏右侧图标。如无需自定义，去除该参数即可
                                //     title: '提示'
                                //     ,layEvent: 'LAYTABLE_TIPS'
                                //     ,icon: 'layui-icon-tips'
                                //     ,skin: 'demo-class'
                                // }]
                                ,title: '学生数据表'
                                ,parseData:function (res) {
                                    console.log(res);
                                    return {
                                        "code": res.code
                                        , "msg": res.msg
                                        , "count": res.count
                                        , "data": res.data
                                    }
                                }
                                ,cols: [[
                                    {type: 'checkbox', fixed: 'left'}
                                    ,{field:'stuId', title:'编号', width:70, fixed: 'left', unresize: true,sort: true}
                                    ,{field:'stuName', title:'姓名', width:60}
                                    ,{field:'stuNum', title:'学号', width:110}
                                    ,{field:'stuSex', title:'性别', width:70}
                                    ,{field:'stuBirth', title:'出生日期', width:120}
                                    ,{field:'gradeName', title:'所在班级', width:120, sort: true,templet: '<div>{{d.grade.gradeName}}</div>'}
                                    ,{field:'subjectNum', title:'选修科目数', width:120,sort: true}
                                    ,{field:'avgScores', title:'平均分', width:90,sort: true}
                                    ,{field:'right', title:'分数录入',toolbar: '#barDemo2', width:95}
                                    ,{field:'right', title:'选课',toolbar: '#barDemo3', width:90}
                                    ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:110}
                                ]]
                                ,page: true
                                ,limits:[1,5,10,20]
                            });
                            tableIns.reload({
                                where: { //设定异步数据接口的额外参数，任意设

                                }
                                ,page: {
                                    curr: 1 //重新从第 1 页开始
                                }
                            });
                        }
                        else{
                            alert("删除失败")
                        }

                    }
                })
            });
        } else if(layEvent === 'edit'){
            layer.open({
                          type: 1,
                          title: '修改',
                          area:['500px','440px'],
                          closeBtn: 1,
                          shadeClose: false,
                          // skin: 'demo-class',
                          content: $('.editManage'),
                      });
        }else if(layEvent === 'enter'){
            location.href="enter.html?stuId="+obj.data['stuId']
        }
        else if(layEvent === 'selectSubject'){
            location.href="selectSubject.html?stuId="+obj.data['stuId']
        }
    });


});

//点击添加按钮弹出层
layui.use(['layer','form'], function(){ //独立版的layer无需执行这一句
  var $ = layui.jquery,
      layer = layui.layer,
       form=layui.form; //独立版的layer无需执行这一句

  //触发事件
  var active = {

    //添加页面事件
  notice: function(){

    //打开隐藏的添加页面
     layer.open({
        type: 1,
        title: ['添加','background-color:black;color:white'],
        area:['550px','500px'],
        closeBtn: 2,
        shadeClose: false,
        skin: 'demo-class',
        content:$('.showAdd')
      });

    }

  };

  $('#layerDemo .layui-btn').on('click', function(){
    var othis = $(this), method = othis.data('method');
    active[method] ? active[method].call(this, othis) : '';
  });
});

// 点击修改按钮后的修改操作
layui.use(['form','table'], function(){
    var form = layui.form
        ,layer = layui.layer
        ,table=layui.table;

//监听提交
    form.on('submit(edit_demo)', function(data){

          console.log($("#stuNameedit").val())
          // layer.msg(data.field)
          $.ajax({
              url : "/student/update",//路径   //  / => localhost(127.0.0.1) :8080
              type : "get",  //提交方式
              dataType: 'json', // 接收数据的格式
              // contentType:'application/json;charset=UTF-8',
              data : {
                  'stuId':$("#stuIdedit").val(),
                  'stuName':$("#stuNameedit").val(),
                  'stuNum':$("#stuNumedit").val(),
                  'stuSex':$("#stuSexedit").val(),
                  'stuBirth':$("#stuBirthedit").val()
              }, //数据，这里使用的是Json格式进行传输  JSON.stringify(obj.field)
              success : function(res) {//返回数据根据结果进行相应的处理
                  if(res.status=="success"){
                      layer.msg("修改成功")
                      var strings=new Array();
                      strings.push($("#stuNumesearch").val())
                      strings.push($("#stuBithsearch1").val())
                      strings.push($("#stuBithsearch2").val())
                      strings.push($("#stuNamesearch").val())
                      var tableIns =table.render({
                          elem: '#test'
                          ,url:"/student/searchQeury?searchNames="+strings
                          // ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
                          ,type:'get'
                          // ,defaultToolbar: ['filter', 'exports', 'print', { //自定义头部工具栏右侧图标。如无需自定义，去除该参数即可
                          //     title: '提示'
                          //     ,layEvent: 'LAYTABLE_TIPS'
                          //     ,icon: 'layui-icon-tips'
                          //     ,skin: 'demo-class'
                          // }]
                          ,title: '用户数据表'
                          ,parseData:function (res) {
                              console.log(res);
                              return {
                                  "code": res.code
                                  , "msg": res.msg
                                  , "count": res.count
                                  , "data": res.data
                              }
                          }
                          ,cols: [[
                              {type: 'checkbox', fixed: 'left'}
                              ,{field:'stuId', title:'编号', width:70, fixed: 'left', unresize: true,sort: true}
                              ,{field:'stuName', title:'姓名', width:60}
                              ,{field:'stuNum', title:'学号', width:110}
                              ,{field:'stuSex', title:'性别', width:70}
                              ,{field:'stuBirth', title:'出生日期', width:120}
                              ,{field:'gradeName', title:'所在班级', width:120, sort: true,templet: '<div>{{d.grade.gradeName}}</div>'}
                              ,{field:'subjectNum', title:'选修科目数', width:120,sort: true}
                              ,{field:'avgScores', title:'平均分', width:90,sort: true}
                              ,{field:'right', title:'分数录入',toolbar: '#barDemo2', width:95}
                              ,{field:'right', title:'选课',toolbar: '#barDemo3', width:90}
                              ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:110}
                          ]]
                          ,page: true
                          ,limits:[1,5,10,20]
                      });
                      tableIns.reload({
                          where: { //设定异步数据接口的额外参数，任意设

                          }
                          ,page: {
                              curr: 1 //重新从第 1 页开始
                          }
                      });
                  }
              }
          });

        return false;//返回false页面就不会刷新
    });


});
//添加页面的操作
layui.use(['form','table'], function(){
    var form = layui.form
        ,layer = layui.layer
        ,table=layui.table;

//监听提交
    form.on('submit(add_demo)', function(data){
        console.log($("#stuNameadd").val())
        $.ajax({
            url : "/student/insertStudent",//路径   //  / => localhost(127.0.0.1) :8080
            type : "post",  //提交方式
            dataType: 'json', // 接收数据的格式
            data : {
                "stuName":$("#stuNameadd").val(),
                 "stuNum":$("#stuNumadd").val(),
                "stuSex":$("#stuSexadd").val(),
                "stuBirth":$("#stuBirthadd").val(),
                "gId":$("#gradeNameadd").val()
            }, //数据，这里使用的是Json格式进行传输  JSON.stringify(obj.field)
            success : function(res) {//返回数据根据结果进行相应的处理
                if(res.status=="success"){
                    layer.msg("添加成功")
                    var strings=new Array();
                    strings.push($("#stuNumesearch").val())
                    strings.push($("#stuBithsearch1").val())
                    strings.push($("#stuBithsearch2").val())
                    strings.push($("#stuNamesearch").val())
                    var tableIns =table.render({
                        elem: '#test'
                        ,url:"/student/searchQeury?searchNames="+strings
                        // ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
                        ,type:'get'
                        // ,defaultToolbar: ['filter', 'exports', 'print', { //自定义头部工具栏右侧图标。如无需自定义，去除该参数即可
                        //     title: '提示'
                        //     ,layEvent: 'LAYTABLE_TIPS'
                        //     ,icon: 'layui-icon-tips'
                        //     ,skin: 'demo-class'
                        // }]
                        ,title: '用户数据表'
                        ,parseData:function (res) {
                            console.log(res);
                            return {
                                "code": res.code
                                , "msg": res.msg
                                , "count": res.count
                                , "data": res.data
                            }
                        }
                        ,cols: [[
                            {type: 'checkbox', fixed: 'left'}
                            ,{field:'stuId', title:'编号', width:70, fixed: 'left', unresize: true,sort: true}
                            ,{field:'stuName', title:'姓名', width:60}
                            ,{field:'stuNum', title:'学号', width:110}
                            ,{field:'stuSex', title:'性别', width:70}
                            ,{field:'stuBirth', title:'出生日期', width:120}
                            ,{field:'gradeName', title:'所在班级', width:120, sort: true,templet: '<div>{{d.grade.gradeName}}</div>'}
                            ,{field:'subjectNum', title:'选修科目数', width:120,sort: true}
                            ,{field:'avgScores', title:'平均分', width:90,sort: true}
                            ,{field:'right', title:'分数录入',toolbar: '#barDemo2', width:95}
                            ,{field:'right', title:'选课',toolbar: '#barDemo3', width:90}
                            ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:110}
                        ]]
                        ,page: true
                        ,limits:[1,5,10,20]
                    });
                    tableIns.reload({
                        where: { //设定异步数据接口的额外参数，任意设

                        }
                        ,page: {
                            curr: 1 //重新从第 1 页开始
                        }
                    });
                }else {
                    layer.alert("添加失败");
                }
            }
        });
        return false;
    });
});

    // 模糊查询

    layui.use(['form','table'], function(){
        var form = layui.form
            ,layer = layui.layer
            ,table=layui.table;

//监听提交
        form.on('submit(search_example)', function(data){
            var strings=new Array();
            strings.push($("#stuNumesearch").val())
            strings.push($("#stuBithsearch1").val())
            strings.push($("#stuBithsearch2").val())
            strings.push($("#stuNamesearch").val())
            console.log(strings.length)
            // var searchNames=$("#stuNumesearch").val()+"."+$("#stuBithsearch1").val()+"."+$("#stuBithsearch2").val()+"."+$("#stuNamesearch").val()
            var tableIns =table.render({
                elem: '#test'
                ,url:"/student/searchQeury?searchNames="+strings
                // ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
                ,type:'get'
                // ,defaultToolbar: ['filter', 'exports', 'print', { //自定义头部工具栏右侧图标。如无需自定义，去除该参数即可
                //     title: '提示'
                //     ,layEvent: 'LAYTABLE_TIPS'
                //     ,icon: 'layui-icon-tips'
                //     ,skin: 'demo-class'
                // }]
                ,title: '用户数据表'
                ,parseData:function (res) {
                    console.log(res);
                    return {
                        "code": res.code
                        , "msg": res.msg
                        , "count": res.count
                        , "data": res.data
                    }
                }
                ,cols: [[
                    {type: 'checkbox', fixed: 'left'}
                    ,{field:'stuId', title:'编号', width:70, fixed: 'left', unresize: true,sort: true}
                    ,{field:'stuName', title:'姓名', width:60}
                    ,{field:'stuNum', title:'学号', width:110}
                    ,{field:'stuSex', title:'性别', width:70}
                    ,{field:'stuBirth', title:'出生日期', width:120}
                    ,{field:'gradeName', title:'所在班级', width:120, sort: true,templet: '<div>{{d.grade.gradeName}}</div>'}
                    ,{field:'subjectNum', title:'选修科目数', width:120,sort: true}
                    ,{field:'avgScores', title:'平均分', width:90,sort: true}
                    ,{field:'right', title:'分数录入',toolbar: '#barDemo2', width:95}
                    ,{field:'right', title:'选课',toolbar: '#barDemo3', width:90}
                    ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:110}
                ]]
                ,page: true
                ,limits:[1,5,10,20]
            });
            tableIns.reload({
                where: { //设定异步数据接口的额外参数，任意设

                }
                ,page: {
                    curr: 1 //重新从第 1 页开始
                }
            });

            return false;
        });
    });



//给下拉框赋值

layui.use('form', function() {
    getClassify();
})

function getClassify(){
    $.ajax({
        url:"/student/myGrade",
        success:function(res){
            console.log(res.length)
            console.log(res)
            // if(res.success){
                for(var i =0;i<res.length;i++){
                    $("#gradeNameadd").append("<option value=\""+res[i].gradeId+"\">"+res[i].gradeName+"</option>");
                }
                //重新渲染
                layui.form.render("select");
            // }else{
            //     layer.msg(res.message);
            // }
        }
    });
}




layui.use('form', function() {
    getClassify3();
})
function getClassify3(){
    $.ajax({
        url:"/student/myGrade",
        success:function(res){
            console.log(res.length)
            console.log(res)
            // if(res.success){
            for(var i =0;i<res.length;i++){
                $("#gradeNameedit").append("<option value=\""+res[i].gradeId+"\">"+res[i].gradeName+"</option>");
            }
            //重新渲染
            layui.form.render("select");
            // }else{
            //     layer.msg(res.message);
            // }
        }
    });
}


</script>
</body>
</html>